// ‡ßß ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶ï‡¶æ‡¶ú (‡¶ü‡ßç‡¶∞‡ßá‡¶® ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶®)
if(id === 1) {
    document.getElementById('view-content').innerHTML = `
        <div class="ai-msg">
            ü§ñ <b>AI Network:</b> ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶ì ‡¶≠‡¶æ‡¶∞‡¶§‡ßá‡¶∞ ‡¶∏‡¶ï‡¶≤ ‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßá‡¶∞ ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶§‡¶•‡ßç‡¶Ø‡•§ 
            ‡¶Ø‡¶¶‡¶ø ‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßá‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞ ‡ß®-‡ß© ‡¶ú‡¶® ‡¶•‡¶æ‡¶ï‡ßá, AI ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶†‡¶ø‡¶ï ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶¨‡ßá‡¶õ‡ßá ‡¶®‡ßá‡¶¨‡ßá‡•§
        </div>
        
        <input id="t-input" class="input-box" placeholder="‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (‡¶â‡¶¶‡¶æ: ‡¶™‡¶æ‡¶∞‡¶æ‡¶¨‡¶§)">
        <button class="btn" onclick="aiSearchTrain()">‡¶≤‡¶æ‡¶á‡¶≠ ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
        
        <div id="ai-status"></div>
        <iframe id="map-container" style="width:100%; height:320px; display:none; border-radius:10px; margin-top:10px;" frameborder="0"></iframe>
    `;
}

// ‡ßß ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ AI ‡¶≤‡¶ú‡¶ø‡¶ï (‡¶Ö‡¶∞‡¶ø‡¶ú‡¶ø‡¶®‡¶æ‡¶≤ ‡¶ö‡¶æ‡¶¨‡¶ø ‡¶ì ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶° ‡¶∏‡¶π)
function aiSearchTrain() {
    let train = document.getElementById('t-input').value.trim().toLowerCase();
    let status = document.getElementById('ai-status');
    let map = document.getElementById('map-container');
    
    if(!train) return alert("‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®");
    status.innerHTML = `<div class="ai-msg">ü§ñ AI ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶®‡¶æ‡¶Æ‡ßá ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶õ‡ßá...</div>`;
    map.style.display = "none";

    // Firebase ‡¶•‡ßá‡¶ï‡ßá ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ö‡ßá‡¶ï
    db.ref('live_gps').once('value', snapshot => {
        let matched = [];
        snapshot.forEach(child => {
            let data = child.val();
            // ‡¶®‡¶æ‡¶Æ ‡¶Æ‡¶ø‡¶≤‡¶≤‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü‡ßá ‡¶®‡ßá‡¶¨‡ßá
            if(data.train && data.train.toLowerCase().includes(train)) matched.push(data);
        });

        if(matched.length > 0) {
            // ‡ß®-‡ß© ‡¶ú‡¶® ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ú‡¶®‡ßá‡¶∞ ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® AI ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá
            let u = matched[0];
            status.innerHTML = `<div class="ai-msg" style="border-left-color:green">
                ‚úÖ <b>AI ‡¶â‡¶§‡ßç‡¶§‡¶∞:</b> ‡¶è‡¶á ‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßá‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ${matched.length} ‡¶ú‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶õ‡ßá‡¶®‡•§ 
                ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶®‡¶ø‡¶ö‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶≤‡ßã‡•§
            </div>`;
            map.style.display = "block";
            map.src = `https://maps.google.com/maps?q=${u.lat},${u.lng}&t=k&z=15&output=embed`;
        } else {
            // ‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßá‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞ ‡¶ï‡ßá‡¶â ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá AI ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶¨‡ßá
            status.innerHTML = `<div class="ai-msg" style="border-left-color:red">
                ‚ùå <b>AI ‡¶â‡¶§‡ßç‡¶§‡¶∞:</b> ‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶è‡¶á ‡¶ü‡ßç‡¶∞‡ßá‡¶®‡ßá‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶®‡ßá‡¶á‡•§ 
                ‡¶§‡¶æ‡¶á ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ‡•§
            </div>`;
        }
    }).catch(err => {
        // ‡¶Ø‡¶¶‡¶ø ‡¶™‡ßç‡¶∞‡¶•‡¶Æ AI ‡¶ö‡¶æ‡¶¨‡¶ø (Gemini Key 1) ‡¶∂‡ßá‡¶∑ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü, ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡ß®‡ßü‡¶ü‡¶ø ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá
        console.log("Switching to Backup AI Key...");
        // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶¨‡¶ø ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßá‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá
    });
}
